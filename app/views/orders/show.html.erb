<h1>Your Cart</h1>

<table>
  <thead>
    <tr>
      <th>Product Name</th>
      <th>Unit Price</th>
      <th>Quantity</th>
      <th>Edit Quantity</th>
      <th>Subtotal</th>
      <th>Options</th>
    </tr>
  </thead>

  <tbody>
    <% @current_cart.order_products.each do | order_product | %>
    <% product = order_product.product %>
    <tr>
      <td><%= link_to product.name, product_path(product.id) %></td>
      <td><%= product.price %></td>
      <td><%= order_product.quantity %></td>
      <td>
        <%= form_for :order_product, url: order_path(@current_cart.id), method: :patch do |f| %>
        <%= f.hidden_field :order_product_id, value: order_product.id %>
        <%= f.select(:quantity, (1..(order_product.product.inventory + order_product.quantity))) %>

        <%= f.submit "Update Quantity", class: "button" %>
        <% end %>
      </td>
      <td><%= "$#{format_price(order_product.calculate_cost)}" %></td>
      <td><%= link_to 'DELETE ORDERPRODUCT' %></td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "Checkout", checkout_path(@current_cart.id), class: "button" %>
